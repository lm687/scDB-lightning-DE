Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954
Select jobs to execute...

[Tue Feb 28 11:31:13 2023]
rule kallisto_alignment:
    input: ../data/lightning/about_files/about-condition-G3_rep1.txt
    output: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
    log: logs/kallisto_count_G3_rep1
    jobid: 0
    reason: Missing output files: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
    wildcards: sample=G3_rep1
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=/Filers/scratch/lmorrill/5011421

kb count /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_16  -o /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1 -i ~/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoINDEX -g ~/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoT2G -x 10XV2
[2023-02-28 11:31:19,663]    INFO [count] Using index /home/l/lmorrill/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoINDEX to generate BUS file to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1 from
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_16
[2023-02-28 11:31:19,664]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_16
[2023-02-28 11:31:24,776]   ERROR [count] 
[bus] Note: Strand option was not specified; setting it to --fr-stranded for specified technology
[index] k-mer length: 31
[index] number of targets: 35,240
[index] number of k-mers: 35,320,605
[index] number of equivalence classes: 66,419
[quant] will process sample 1: /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_16
/project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_16
[quant] will process sample 2: /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_16
/project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_16
[quant] will process sample 3: /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_16
/project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_16
[quant] will process sample 4: /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_16
/project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_16
[quant] finding pseudoalignments for the reads ... done
[quant] processed 0 reads, 0 reads pseudoaligned
[~warn] no reads pseudoaligned.

[2023-02-28 11:31:24,777]   ERROR [main] An exception occurred
Traceback (most recent call last):
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/main.py", line 1305, in main
    COMMAND_TO_FUNCTION[args.command](parser, args, temp_dir=temp_dir)
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/main.py", line 550, in parse_count
    count(
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/ngs_tools/logging.py", line 62, in inner
    return func(*args, **kwargs)
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/count.py", line 1038, in count
    bus_result = kallisto_bus(
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/validate.py", line 116, in inner
    results = func(*args, **kwargs)
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/count.py", line 150, in kallisto_bus
    run_executable(command)
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/dry/__init__.py", line 25, in inner
    return func(*args, **kwargs)
  File "/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/utils.py", line 203, in run_executable
    raise sp.CalledProcessError(p.returncode, ' '.join(command))
subprocess.CalledProcessError: Command '/home/l/lmorrill/t1data/conda/rufus_env/envs/py310/lib/python3.10/site-packages/kb_python/bins/compiled/kallisto/kallisto bus -i /home/l/lmorrill/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoINDEX -o /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1 -x 10XV2 -t 8 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_16 /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_16' returned non-zero exit status 1.
ImproperOutputException in rule kallisto_alignment in file /Filers/home/l/lmorrill/projects/lighting/1_pipeline/Snakefile, line 54:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule kallisto_alignment:
    output: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
    wildcards: sample=G3_rep1
    affected files:
        /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
Removing output files of failed job kallisto_alignment since they might be corrupted:
/project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
Skipped removing non-empty directory /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G3_rep1
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Using Kallisto
    sample                                              cells
0  G1_rep1  636200_14,654654_14,660727_14,660728_14,660729...
1  G1_rep2  636200_18,654654_18,660727_18,660728_18,660729...
2  G2_rep1  636200_15,654654_15,660727_15,660728_15,660729...
3  G2_rep2  636200_19,654654_19,660727_19,660728_19,660729...
4  G3_rep1  636200_16,654654_16,660727_16,660728_16,660729...
5  G3_rep2  636200_20,654654_20,660727_20,660728_20,660729...
6  G4_rep1  636200_17,654654_17,660727_17,660728_17,660729...
7  G4_rep2  636200_21,654654_21,660727_21,660728_21,660729...
CBB Profiling started Tue Feb 28 11:31:11 2023
SLURM_JOB_ID		5011421
REQ_CPU_CORES		1
REQ_MEMORY_GB		10.000000
Starting profiling...

                                                                                
                                                                                
                                    CPU (cores)                                 
  1.2 +---------------------------------------------------------------------+   
      |         +         +         +         +         +  ########         |   
      |                                                ####       #         |   
      |                                              ##            #        |   
    1 |********************************************##**************#****  +-|   
      |                                            #               #        |   
      |                                           #                #        |   
      |                                           #                 #       |   
  0.8 |-+            ##                          #                  #     +-|   
      |            ##  ##                        #                  #       |   
      |          ##      ##                     #                    #      |   
  0.6 |-+       #          ##                   #                    #    +-|   
      |        #             ##                #                     #      |   
      |      ##                ########        #                      #     |   
      |     #                          #####  #                       #     |   
  0.4 |-+  #                                ###                       #   +-|   
      |   #                                                           #     |   
      |   #                                                            #    |   
      |  #                                                             #    |   
  0.2 |-+#                                                                +-|   
      | #                                                                   |   
      |#                                                                    |   
      |#        +         +         +         +         +         +         |   
    0 +---------------------------------------------------------------------+   
      0         2         4         6         8         10        12        14  
                                Job profiling step                              
                                                                                

                                                                                
                                                                                
                                   Memory (GB)                                  
  10 +----------------------------------------------------------------------+   
     |         +         +         +          +         +         +         |   
   9 |-+                                                                  +-|   
     |                                                                      |   
     |                                                                      |   
   8 |-+                                                                  +-|   
     |                                                                      |   
   7 |-+                                                                  +-|   
     |                                                                      |   
   6 |-+                                                                  +-|   
     |                                                                      |   
   5 |-+                                                                  +-|   
     |                                                                      |   
     |                                                                      |   
   4 |-+                                                                  +-|   
     |                                                                      |   
   3 |-+                                                                  +-|   
     |                                                                      |   
   2 |-+                                                                  +-|   
     |                                             ################         |   
     |                                           ##                ##       |   
   1 |-+                                       ##                    ##   +-|   
     |         +         +       ##############         +         +    #    |   
   0 +----------------------------------------------------------------------+   
     0         2         4         6          8         10        12        14  
                               Job profiling step                               
                                                                                

                                                                                
                                                                                
                                   Data read (GB)                               
  8e-06 +-------------------------------------------------------------------+   
        |         ######################################################    |   
        |         #                                                         |   
  7e-06 |-+       #                                                       +-|   
        |        #                                                          |   
        |        #                                                          |   
  6e-06 |-+      #                                                        +-|   
        |        #                                                          |   
        |       #                                                           |   
  5e-06 |-+     #                                                         +-|   
        |       #                                                           |   
  4e-06 |-+     #                                                         +-|   
        |       #                                                           |   
        |      #                                                            |   
  3e-06 |-+    #                                                          +-|   
        |      #                                                            |   
        |      #                                                            |   
  2e-06 |-+   #                                                           +-|   
        |     #                                                             |   
        |     #                                                             |   
  1e-06 |-+   #                                                           +-|   
        |    #                                                              |   
        |    #    +        +         +         +         +        +         |   
      0 +-------------------------------------------------------------------+   
        0         2        4         6         8         10       12        14  
                                 Job profiling step                             
                                                                                

                                                                                
                                                                                
                                  Data written (GB)                             
   0.002 +------------------------------------------------------------------+   
         |         +        +         +        +         +        +    #    |   
  0.0018 |-+                                                           #  +-|   
         |                                                             #    |   
         |                                                            #     |   
  0.0016 |-+                                                          #   +-|   
         |                                                            #     |   
  0.0014 |-+                                                          #   +-|   
         |                                                           #      |   
  0.0012 |-+                                                         #    +-|   
         |                                                           #      |   
   0.001 |-+                                                         #    +-|   
         |                                                          #       |   
         |                                                          #       |   
  0.0008 |-+                                                        #     +-|   
         |                                                          #       |   
  0.0006 |-+                                                       #      +-|   
         |                                                         #        |   
  0.0004 |-+                                                       #      +-|   
         |                                                         #        |   
         |                                                        #         |   
  0.0002 |-+                                 ######################       +-|   
         |       ############################  +         +        +         |   
       0 +------------------------------------------------------------------+   
         0         2        4         6        8         10       12        14  
                                 Job profiling step                             
                                                                                
