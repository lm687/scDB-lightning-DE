Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 1 (use --cores to define parallelism)
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954
Select jobs to execute...

[Tue Feb 28 14:36:31 2023]
rule kallisto_alignment:
    input: ../data/lightning/about_files/about-condition-G1_rep2.txt
    output: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
    log: logs/kallisto_count_G1_rep2
    jobid: 0
    reason: Missing output files: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
    wildcards: sample=G1_rep2
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=/Filers/scratch/lmorrill/5011732

kb count /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_18/636200_18_S24_L001_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_18/636200_18_S24_L001_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_18/654654_18_S12_L007_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_18/654654_18_S12_L007_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_18/660727_18_S13_L003_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_18/660727_18_S13_L003_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_18/660728_18_S41_L004_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_18/660728_18_S41_L004_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_18/660729_18_S49_L005_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_18/660729_18_S49_L005_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_18/660730_18_S5_L006_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_18/660730_18_S5_L006_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_18/660731_18_S21_L007_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_18/660731_18_S21_L007_R2_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_18/660732_18_S31_L008_R1_001.fastq.gz /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_18/660732_18_S31_L008_R2_001.fastq.gz  -o /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2 -i ~/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoINDEX -g ~/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoT2G -x 10XV3
[2023-02-28 14:36:48,654]    INFO [count] Using index /home/l/lmorrill/projects/general/genomes_kallisto/dmel-all-r6.49_CORRECTED_Chrimson_KallistoINDEX to generate BUS file to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2 from
[2023-02-28 14:36:48,654]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_18/636200_18_S24_L001_R1_001.fastq.gz
[2023-02-28 14:36:48,654]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/636200_18/636200_18_S24_L001_R2_001.fastq.gz
[2023-02-28 14:36:48,654]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_18/654654_18_S12_L007_R1_001.fastq.gz
[2023-02-28 14:36:48,654]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/654654_18/654654_18_S12_L007_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_18/660727_18_S13_L003_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660727_18/660727_18_S13_L003_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_18/660728_18_S41_L004_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660728_18/660728_18_S41_L004_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_18/660729_18_S49_L005_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660729_18/660729_18_S49_L005_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_18/660730_18_S5_L006_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660730_18/660730_18_S5_L006_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_18/660731_18_S21_L007_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660731_18/660731_18_S21_L007_R2_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_18/660732_18_S31_L008_R1_001.fastq.gz
[2023-02-28 14:36:48,655]    INFO [count]         /project/cncb/shared/proj002/backup/CELLRANGER_OUT/660732_18/660732_18_S31_L008_R2_001.fastq.gz
[2023-02-28 15:48:23,562]    INFO [count] Sorting BUS file /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/output.bus to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/tmp/output.s.bus
[2023-02-28 15:50:16,753]    INFO [count] Whitelist not provided
[2023-02-28 15:50:16,756]    INFO [count] Copying pre-packaged 10XV3 whitelist to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
[2023-02-28 15:50:17,827]    INFO [count] Inspecting BUS file /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/tmp/output.s.bus
[2023-02-28 15:50:40,395]    INFO [count] Correcting BUS records in /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/tmp/output.s.bus to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/tmp/output.s.c.bus with whitelist /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/10x_version3_whitelist.txt
[2023-02-28 15:51:20,371]    INFO [count] Sorting BUS file /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/tmp/output.s.c.bus to /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/output.unfiltered.bus
[2023-02-28 15:52:20,590]    INFO [count] Generating count matrix /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/counts_unfiltered/cells_x_genes from BUS file /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2/output.unfiltered.bus
ImproperOutputException in rule kallisto_alignment in file /Filers/home/l/lmorrill/projects/lighting/1_pipeline/Snakefile, line 74:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule kallisto_alignment:
    output: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
    wildcards: sample=G1_rep2
    affected files:
        /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
Removing output files of failed job kallisto_alignment since they might be corrupted:
/project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
Skipped removing non-empty directory /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/dmel649Chrimson/G1_rep2
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Using Kallisto
The OUT folder is: /project/sims-lab/lmorrill/data/lightning/alignment/KallistoOUT/
    sample                                              cells
0  G1_rep1  636200_14,654654_14,660727_14,660728_14,660729...
1  G1_rep2  636200_18,654654_18,660727_18,660728_18,660729...
2  G2_rep1  636200_15,654654_15,660727_15,660728_15,660729...
3  G2_rep2  636200_19,654654_19,660727_19,660728_19,660729...
4  G3_rep1  636200_16,654654_16,660727_16,660728_16,660729...
5  G3_rep2  636200_20,654654_20,660727_20,660728_20,660729...
6  G4_rep1  636200_17,654654_17,660727_17,660728_17,660729...
7  G4_rep2  636200_21,654654_21,660727_21,660728_21,660729...
CBB Profiling started Tue Feb 28 14:36:06 2023
SLURM_JOB_ID		5011732
REQ_CPU_CORES		1
REQ_MEMORY_GB		10.000000
Starting profiling...

                                                                                
                                                                                
                                    CPU (cores)                                 
  1.2 +---------------------------------------------------------------------+   
      |             +             +             +             +             |   
      |                                                                     |   
      |##                                                                   |   
    1 |###########################################################**###   +-|   
      |#                                                         ## ###     |   
      |#                                                         ######     |   
      |#                                                         ######     |   
  0.8 |#+                                                        ######   +-|   
      |#                                                         ## ###     |   
      |#                                                         ## ###     |   
  0.6 |#+                                                        ## ###   +-|   
      |#                                                         ## ###     |   
      |#                                                         ## ###     |   
      |#                                                         ## ###     |   
  0.4 |#+                                                        ## ###   +-|   
      |#                                                         ## ###     |   
      |#                                                         ## ###     |   
      |#                                                         ## ###     |   
  0.2 |#+                                                        ## ###   +-|   
      |#                                                         ## ###     |   
      |                                                          ## ###     |   
      |             +             +             +             +  ## ###     |   
    0 +---------------------------------------------------------------------+   
      0            500           1000          1500          2000          2500 
                                Job profiling step                              
                                                                                

                                                                                
                                                                                
                                   Memory (GB)                                  
  10 +----------------------------------------------------------------------+   
     |             +             +              +             +             |   
   9 |-+                                                                  +-|   
     |                                                                      |   
     |                                                                      |   
   8 |-+                                                                  +-|   
     |                                                                      |   
   7 |-+                                                                  +-|   
     |                                                                      |   
   6 |-+                                                                  +-|   
     |                                                                      |   
   5 |-+                                                                  +-|   
     |                                                                      |   
     |                                                            ##        |   
   4 |-+                                                          ## #    +-|   
     |                                                            ## #      |   
   3 |-+                                                          ## #    +-|   
     |                                                            ## #      |   
   2 |-+                                                          ## #    +-|   
     |############################################################## #      |   
     |#                                                          ### #      |   
   1 |#+                                                         #####    +-|   
     |#            +             +              +             +  ######     |   
   0 +----------------------------------------------------------------------+   
     0            500           1000           1500          2000          2500 
                               Job profiling step                               
                                                                                

                                                                                
                                                                                
                                 Data read (GB)                                 
  45 +----------------------------------------------------------------------+   
     |             +             +              +             +             |   
     |                                                             ####     |   
  40 |-+                                                          ##      +-|   
     |                                                           ##         |   
  35 |-+                                                       ###        +-|   
     |                                                      ####            |   
     |                                                  #####               |   
  30 |-+                                             ####                 +-|   
     |                                           #####                      |   
  25 |-+                                      ####                        +-|   
     |                                     ####                             |   
     |                                  ####                                |   
  20 |-+                             ####                                 +-|   
     |                           #####                                      |   
  15 |-+                      ####                                        +-|   
     |                     ####                                             |   
     |                 #####                                                |   
  10 |-+            ####                                                  +-|   
     |           ####                                                       |   
   5 |-+     #####                                                        +-|   
     |    ####                                                              |   
     | ####        +             +              +             +             |   
   0 +----------------------------------------------------------------------+   
     0            500           1000           1500          2000          2500 
                               Job profiling step                               
                                                                                

                                                                                
                                                                                
                                Data written (GB)                               
  25 +----------------------------------------------------------------------+   
     |             +             +              +             +             |   
     |                                                                      |   
     |                                                                      |   
     |                                                               ##     |   
  20 |-+                                                             #    +-|   
     |                                                               #      |   
     |                                                               #      |   
     |                                                               #      |   
  15 |-+                                                            ##    +-|   
     |                                                              #       |   
     |                                                             ##       |   
     |                                                             #        |   
     |                                                             #        |   
  10 |-+                                                           #      +-|   
     |                                                             #        |   
     |                                                             #        |   
     |                                                         #####        |   
   5 |-+                                             ###########          +-|   
     |                                    ############                      |   
     |                          ###########                                 |   
     |               ############                                           |   
     |     ###########           +              +             +             |   
   0 +----------------------------------------------------------------------+   
     0            500           1000           1500          2000          2500 
                               Job profiling step                               
                                                                                
